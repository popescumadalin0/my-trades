@page "/"
@using MyTrades.Client.Models
@inject MockDataService DataService

<PageTitle>Home</PageTitle>

<MudText Typo="Typo.h4">Dashboard</MudText>

<MudGrid>
    <MudItem xs="12" sm="12" md="4">
        <MudPaper Class="pa-4">
            <MudText Typo="Typo.h6">Top Strategies</MudText>
            <MudTable Items="DataService.Strategies.OrderByDescending(s => s.Profit).Take(5)">
                <HeaderContent>
                    <MudTh>Name</MudTh>
                    <MudTh>Profit</MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd>@context.Name</MudTd>
                    <MudTd>@context.Profit</MudTd>
                </RowTemplate>
            </MudTable>
        </MudPaper>
    </MudItem>

    <MudItem xs="12" sm="12" md="4">
        <MudPaper Class="pa-4">
            <MudText Typo="Typo.h6">Recent Trades</MudText>
            <MudTable Items="DataService.Trades.OrderByDescending(t => t.Id).Take(5)">
                <HeaderContent>
                    <MudTh>Symbol</MudTh>
                    <MudTh>Strategy</MudTh>
                    <MudTh>PnL</MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd>@context.Symbol</MudTd>
                    <MudTd>@context.StrategyName</MudTd>
                    <MudTd>@context.Pnl</MudTd>
                </RowTemplate>
            </MudTable>
        </MudPaper>
    </MudItem>

    <MudItem xs="12" sm="12" md="4">
        <MudPaper Class="pa-4">
            <MudText Typo="Typo.h6">Watchlist CFDs</MudText>
            <MudList T="TradeModel">
                @foreach(var t in DataService.Trades.Take(8))
                {
                    <MudListItem T="TradeModel">
                        <MudText>@t.Symbol - @t.CurrentPrice</MudText>
                    </MudListItem>
                }
            </MudList>
        </MudPaper>
    </MudItem>
</MudGrid>